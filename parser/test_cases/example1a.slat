# This is an example file
title 'Example File';
title '------------';
title 'This title has several lines.';
print title example1a_out.txt --new;

# Define the IM function:
#                        v_asy, IM_asy, alpha
#detfn IM_FUNC hyperbolic 1221,   29.8,  62.2;
detfn IM_FUNC loglog    [0.01, 0.376775], [0.02, 0.155158], [0.04, 0.054048],
        [0.06, 0.027886], [0.08, 0.017241], [0.1, 0.011857],  [0.2, 0.003656],
	[0.3, 0.001628],  [0.4, 0.000794],  [0.5, 0.000405],  [0.6, 0.000214],
	[0.7, 0.000115],  [0.8, 0.000064],  [0.9, 0.000037],  [1.0, 0.000021],
	[1.1, 0.000013],  [1.2, 7.00E-06],  [1.3, 4.00E-06],  [1.4, 3.00E-06],
	[1.5, 1.80E-06],  [1.6, 1.00E-06],  [1.7, 7.00E-07],  [1.8, 4.00E-07],
	[1.9, 2.00E-07],  [2.0, 1.00E-07];

# Define the EDP-IM functions:
#                          a    b
#detfn MU_EDP powerlaw    0.1, 1.5;
#detfn SIGMA_EDP powerlaw 0.5, 0.0;

#probfn EDPIM_FUNC lognormal MU_EDP, SIGMA_EDP --mu mean_x --sd sd_ln_x;
importprobfn EDPIM_FUNC_1  /home/mag109/SLATv1.15_Public/example2_10storeybuilding/RB_EDP1.txt;
importprobfn EDPIM_FUNC_2  /home/mag109/SLATv1.15_Public/example2_10storeybuilding/RB_EDP2.txt;
importprobfn EDPIM_FUNC_3  /home/mag109/SLATv1.15_Public/example2_10storeybuilding/RB_EDP3.txt;
importprobfn EDPIM_FUNC_4  /home/mag109/SLATv1.15_Public/example2_10storeybuilding/RB_EDP4.txt;
importprobfn EDPIM_FUNC_5  /home/mag109/SLATv1.15_Public/example2_10storeybuilding/RB_EDP5.txt;
importprobfn EDPIM_FUNC_6  /home/mag109/SLATv1.15_Public/example2_10storeybuilding/RB_EDP6.txt;
importprobfn EDPIM_FUNC_7  /home/mag109/SLATv1.15_Public/example2_10storeybuilding/RB_EDP7.txt;
importprobfn EDPIM_FUNC_8  /home/mag109/SLATv1.15_Public/example2_10storeybuilding/RB_EDP8.txt;
importprobfn EDPIM_FUNC_9  /home/mag109/SLATv1.15_Public/example2_10storeybuilding/RB_EDP9.txt;
importprobfn EDPIM_FUNC_10  /home/mag109/SLATv1.15_Public/example2_10storeybuilding/RB_EDP10.txt;
importprobfn EDPIM_FUNC_11  /home/mag109/SLATv1.15_Public/example2_10storeybuilding/RB_EDP11.txt;
importprobfn EDPIM_FUNC_12  /home/mag109/SLATv1.15_Public/example2_10storeybuilding/RB_EDP12.txt;
importprobfn EDPIM_FUNC_13  /home/mag109/SLATv1.15_Public/example2_10storeybuilding/RB_EDP13.txt;
importprobfn EDPIM_FUNC_14  /home/mag109/SLATv1.15_Public/example2_10storeybuilding/RB_EDP14.txt;
importprobfn EDPIM_FUNC_15  /home/mag109/SLATv1.15_Public/example2_10storeybuilding/RB_EDP15.txt;
importprobfn EDPIM_FUNC_16  /home/mag109/SLATv1.15_Public/example2_10storeybuilding/RB_EDP16.txt;
importprobfn EDPIM_FUNC_17  /home/mag109/SLATv1.15_Public/example2_10storeybuilding/RB_EDP17.txt;
importprobfn EDPIM_FUNC_18  /home/mag109/SLATv1.15_Public/example2_10storeybuilding/RB_EDP18.txt;
importprobfn EDPIM_FUNC_19  /home/mag109/SLATv1.15_Public/example2_10storeybuilding/RB_EDP19.txt;
importprobfn EDPIM_FUNC_20  /home/mag109/SLATv1.15_Public/example2_10storeybuilding/RB_EDP20.txt;
importprobfn EDPIM_FUNC_21  /home/mag109/SLATv1.15_Public/example2_10storeybuilding/RB_EDP21.txt;

# Define relationships:
im IM_1 IM_FUNC;
collapse IM_1 0.9, 0.470 --mu mean_x --sd sd_ln_x;
edp EDP_1 IM_1 EDPIM_FUNC_1;
edp EDP_2 IM_1 EDPIM_FUNC_2;
edp EDP_3 IM_1 EDPIM_FUNC_3;
edp EDP_4 IM_1 EDPIM_FUNC_4;

# Fragility, loss, component group:
fragfn FRAG_1 [0.005, 0.40],
              [0.010, 0.45],
	      [0.030, 0.50],
	      [0.060, 0.60]
        --mu mean_x --sd sd_ln_x;

lossfn LOSS_1 simple [1143, 0.42],
                     [3214, 0.40],
		     [4900, 0.37],
		     [4900, 0.37]
              --mu mean_x --sd sd_ln_x;

compgroup COMPGROUP_1 EDP_1 FRAG_1 LOSS_1 20;
compgroup COMPGROUP_2 EDP_2 FRAG_1 LOSS_1 18;
compgroup COMPGROUP_3 EDP_2 FRAG_1 LOSS_1  4;

structure BUILDING COMPGROUP_1, COMPGROUP_2, COMPGROUP_3;
rebuildcost BUILDING 10, 0.35 --mu mean_x --sd sd_ln_x;

# Set up integration parameters:
integration maq 1E-6 1024;

# Set up recorders:
#set values $(numpy.arange(0.0, 1.01, 0.01);
set logvalues $(list(map(math.exp, math.log(0.01) + numpy.arange(0, 199, 1) * math.log(2.5/0.01)/198)));
set linvalues $(0.01 + numpy.arange(0, 199, 1) * (2.5 - 0.01)/198);
recorder imrate IM_1 $logvalues example1a_im_rate --new;
recorder collapse IM_1 $(0.01 + numpy.arange(0, 199, 1) * (2.5 - 0.01)/198) example1a_collapse.txt --new;
recorder collrate IM_1 example1a_collrate.txt --new;
recorder edpim EDP_1  $(0.01 + numpy.arange(0, 199, 1) * (2.5 - 0.01)/198) --cols mean_x, sd_ln_x, 0.16, 0.50, 0.84 example1a_im_edp_1.txt --new;
recorder edprate EDP_1 $(list(map(math.exp, math.log(0.001) + numpy.arange(0, 149, 1) * math.log(0.15/0.001)/148)))  example1a_edp_1_rate.txt --new;
recorder edpim EDP_2  $(0.01 + numpy.arange(0, 199, 1) * (2.5 - 0.01)/198) --cols mean_x, sd_ln_x, 0.16, 0.50, 0.84 example1a_im_edp_2.txt --new;
recorder edprate EDP_2 $(list(map(math.exp, math.log(0.001) + numpy.arange(0, 149, 1) * math.log(0.15/0.001)/148)))  example1a_edp_2_rate.txt --new;
recorder dsedp COMPGROUP_1 0.0:0.001:0.200  example1a_ds_edp.txt --new;

recorder dsrate COMPGROUP_1;
recorder lossedp COMPGROUP_1 $(0.001 + numpy.arange(0, 149, 1) * (0.15 - 0.001)/148) --cols mean_x, sd_ln_x example1a_loss_1_edp.txt --new;
recorder lossim COMPGROUP_1 $(0.01 + numpy.arange(0, 199, 1) * (2.5 - 0.01)/198 )  --cols mean_x, sd_ln_x example1a_loss_1_im.txt --new;

recorder lossedp COMPGROUP_2 $(0.001 + numpy.arange(0, 149, 1) * (0.15 - 0.001)/148) --cols mean_x, sd_ln_x example1a_loss_2_edp.txt --new;
recorder lossim COMPGROUP_2 $(0.01 + numpy.arange(0, 199, 1) * (2.5 - 0.01)/198 )  --cols mean_x, sd_ln_x example1a_loss_2_im.txt --new;

recorder annloss COMPGROUP_1 1.0:1.0:100.0 --lambda 0.06 example1a_annual_loss.txt --new;

recorder lossrate COMPGROUP_1 1E-4:4.8E-3:1.2 example1a_loss_rate.txt --new;

recorder structloss BUILDING --collapse $linvalues example1a_loss_c_total --new;
recorder structloss BUILDING --nocollapse $linvalues example1a_loss_nc_total --new;

analyze;


